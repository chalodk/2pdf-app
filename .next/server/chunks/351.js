exports.id=351,exports.ids=[351],exports.modules={1323:(e,a)=>{"use strict";Object.defineProperty(a,"l",{enumerable:!0,get:function(){return function e(a,t){return t in a?a[t]:"then"in a&&"function"==typeof a.then?a.then(a=>e(a,t)):"function"==typeof a&&"default"===t?a:void 0}}})},8312:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>d});var n=t(997),r=t(6689),i=t(9752),o=t(3568),c=e([i,o]);[i,o]=c.then?(await c)():c;let u=process.env.NEXT_PUBLIC_N8N_WEBHOOK_URL||"";async function l(e){if(!u)throw Error("Webhook URL not configured. Please set NEXT_PUBLIC_N8N_WEBHOOK_URL");let a=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e})});if(!a.ok)throw Error(`Webhook error: ${a.status} ${a.statusText}`);return await a.json()}function d(){let[e,a]=(0,r.useState)(""),[t,s]=(0,r.useState)([]),c=(0,o.E)(e=>e.applyAIResponse),d=(0,i.useMutation)({mutationFn:l,onSuccess:t=>{c(t),s(a=>[...a,{type:"user",content:e},{type:"assistant",content:"Template actualizado exitosamente! ✨"}]),a("")},onError:a=>{s(t=>[...t,{type:"user",content:e},{type:"error",content:`Error: ${a.message}`}])}});return(0,n.jsxs)("div",{className:"ai-chat-sidebar",children:[(0,n.jsxs)("div",{className:"ai-chat-header",children:[n.jsx("h3",{children:"AI Assistant"}),n.jsx("p",{className:"ai-chat-subtitle",children:"Describe tu template y lo generar\xe9 por ti"})]}),(0,n.jsxs)("div",{className:"ai-chat-messages",children:[0===t.length&&(0,n.jsxs)("div",{className:"ai-chat-empty",children:[n.jsx("p",{children:"Env\xeda un mensaje para comenzar..."}),n.jsx("p",{className:"ai-chat-example",children:'Ejemplo: "Crea un CV moderno con secciones para experiencia, educaci\xf3n y habilidades"'})]}),t.map((e,a)=>(0,n.jsxs)("div",{className:`ai-chat-message ai-chat-message-${e.type}`,children:["user"===e.type&&n.jsx("span",{className:"ai-chat-role",children:"T\xfa:"}),"assistant"===e.type&&n.jsx("span",{className:"ai-chat-role",children:"AI:"}),"error"===e.type&&n.jsx("span",{className:"ai-chat-role",children:"Error:"}),n.jsx("span",{className:"ai-chat-content",children:e.content})]},a)),d.isPending&&(0,n.jsxs)("div",{className:"ai-chat-message ai-chat-message-assistant",children:[n.jsx("span",{className:"ai-chat-role",children:"AI:"}),n.jsx("span",{className:"ai-chat-content",children:"Generando template..."})]})]}),(0,n.jsxs)("form",{className:"ai-chat-input-form",onSubmit:t=>{if(t.preventDefault(),e.trim()&&!d.isPending){if(!u){s(a=>[...a,{type:"user",content:e},{type:"error",content:"Webhook URL no configurada. Por favor configura NEXT_PUBLIC_N8N_WEBHOOK_URL"}]),a("");return}d.mutate(e)}},children:[n.jsx("input",{type:"text",value:e,onChange:e=>a(e.target.value),placeholder:"Describe el template que quieres crear...",disabled:d.isPending,className:"ai-chat-input"}),n.jsx("button",{type:"submit",disabled:!e.trim()||d.isPending,className:"ai-chat-send-btn",children:d.isPending?"Enviando...":"Enviar"})]})]})}s()}catch(e){s(e)}})},9078:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>p});var n=t(997),r=t(6689),i=t(337),o=t(1925),c=t(625),l=t(624),d=t(4821),u=t(8312),h=t(3568),m=e([d,u,h]);function p(){let[e,a]=(0,r.useState)("HTML"),[t,s]=(0,r.useState)(!0),m=(0,h.E)(e=>e.html),p=(0,h.E)(e=>e.css),f=(0,h.E)(e=>e.data),x=(0,h.E)(e=>e.setHtml),v=(0,h.E)(e=>e.setCss),y=(0,h.E)(e=>e.setData);return(0,n.jsxs)("div",{className:`editor-layout ${t?"with-sidebar":"no-sidebar"}`,children:[t&&n.jsx(u.Z,{}),(0,n.jsxs)("div",{className:"left-panel",children:[(0,n.jsxs)("div",{className:"panel-header",children:[n.jsx(i.Z,{activeTab:e,onTabChange:a}),n.jsx("button",{className:"ai-toggle-btn",onClick:()=>s(!t),title:t?"Ocultar AI":"Mostrar AI",children:t?"✕":"\uD83E\uDD16"})]}),n.jsx("div",{className:"editor-wrapper",children:(()=>{switch(e){case"HTML":return n.jsx(o.Z,{value:m,onChange:x});case"CSS":return n.jsx(c.Z,{value:p,onChange:v});case"Data":return n.jsx(l.Z,{value:f,onChange:y});default:return null}})()})]}),n.jsx("div",{className:"right-panel",children:n.jsx(d.Z,{})})]})}[d,u,h]=m.then?(await m)():m,s()}catch(e){s(e)}})},625:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var s=t(997),n=t(2587),r=t.n(n);function i({value:e,onChange:a}){return s.jsx(r(),{height:"100%",language:"css",theme:"vs-dark",value:e,onChange:a,options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",automaticLayout:!0}})}},624:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var s=t(997),n=t(2587),r=t.n(n);function i({value:e,onChange:a}){return s.jsx(r(),{height:"100%",language:"json",theme:"vs-dark",value:e,onChange:a,onValidate:e=>{},options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",automaticLayout:!0,formatOnPaste:!0}})}},1925:(e,a,t)=>{"use strict";t.d(a,{Z:()=>i});var s=t(997),n=t(2587),r=t.n(n);function i({value:e,onChange:a}){return s.jsx(r(),{height:"100%",language:"html",theme:"vs-dark",value:e,onChange:a,options:{minimap:{enabled:!1},fontSize:14,wordWrap:"on",automaticLayout:!0}})}},4821:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(a,{Z:()=>l});var n=t(997),r=t(6689),i=t(3568),o=e([i]);async function c(e,a,t){try{let s=JSON.parse(t),n=function(e,a){let t=e.replace(/{%\s*for\s+(\w+)\s+in\s+([\w.]+)\s*%}([\s\S]*?){%\s*endfor\s*%}/g,(e,a,t,s)=>`{{#each ${t} as |${a}|}}${s}{{/each}}`);return`
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="UTF-8">
        <style>${a}</style>
      </head>
      <body>
        ${t}
      </body>
    </html>
  `}(e,a),r=await fetch("http://localhost:3000/render",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({template:n,data:s})});if(!r.ok)throw Error(`Error: ${r.status} ${r.statusText}`);let i=await r.blob(),o=window.URL.createObjectURL(i),c=document.createElement("a");c.href=o,c.download="documento.pdf",document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(o),document.body.removeChild(c)}catch(e){console.error("Error generating PDF:",e),alert("Error al generar el PDF: "+e.message)}}function l(){let[e,a]=(0,r.useState)(""),[t,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1);(0,r.useRef)("");let h=(0,i.E)(e=>e.html),m=(0,i.E)(e=>e.css),p=(0,i.E)(e=>e.data),f=async()=>{l(!0);try{await c(h,m,p)}finally{l(!1)}};return d?(0,n.jsxs)("div",{className:"preview-container",children:[n.jsx("div",{className:"preview-header",children:n.jsx("button",{className:"generate-pdf-btn",onClick:f,disabled:o,children:o?"Generando...":"Generar PDF"})}),t&&n.jsx("iframe",{className:"preview-frame",src:t,sandbox:"allow-same-origin allow-scripts allow-popups",title:"Preview"})]}):(0,n.jsxs)("div",{className:"preview-container",children:[n.jsx("div",{className:"preview-header",children:n.jsx("button",{className:"generate-pdf-btn",disabled:!0,children:"Cargando..."})}),n.jsx("div",{className:"preview-frame",style:{display:"flex",alignItems:"center",justifyContent:"center",color:"#8b949e"},children:"Cargando preview..."})]})}i=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})},337:(e,a,t)=>{"use strict";t.d(a,{Z:()=>n});var s=t(997);function n({activeTab:e,onTabChange:a}){return s.jsx("div",{className:"tabs",children:["HTML","CSS","Data"].map(t=>s.jsx("button",{className:`tab ${e===t?"active":""}`,onClick:()=>a(t),children:t},t))})}},7368:()=>{},5244:(e,a)=>{"use strict";var t;Object.defineProperty(a,"x",{enumerable:!0,get:function(){return t}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(t||(t={}))},7984:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>c});var n=t(997);t(7368);var r=t(9752),i=t(6689),o=e([r]);function c({Component:e,pageProps:a}){let[t]=(0,i.useState)(()=>new r.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1}}}));return n.jsx(r.QueryClientProvider,{client:t,children:n.jsx(e,{...a})})}r=(o.then?(await o)():o)[0],s()}catch(e){s(e)}})},3568:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.d(a,{E:()=>l});var n=t(6912),r=e([n]);n=(r.then?(await r)():r)[0];let i=`<div class="card">
  <h1>Hello {{name}}</h1>
  <p>Email: {{user.email}}</p>
  <p>{{description}}</p>
  
  <h2>Resultados</h2>
  <ul>
    {% for resultado in resultados %}
    <li>{{resultado.titulo}} - {{resultado.valor}}</li>
    {% endfor %}
  </ul>
</div>`,o=`body {
  font-family: 'Inter', sans-serif;
  padding: 20px;
  background: #f5f5f5;
}

.card {
  background: white;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1 {
  color: #2563eb;
  margin-bottom: 12px;
}

p {
  color: #64748b;
  margin: 8px 0;
}`,c=JSON.stringify({name:"Gonzalo",user:{email:"gonzalo@example.com"},description:"Welcome to the template editor!",resultados:[{titulo:"Ventas Q1",valor:"$12,500"},{titulo:"Ventas Q2",valor:"$15,800"},{titulo:"Ventas Q3",valor:"$18,200"}]},null,2),l=(0,n.create)(e=>({html:i,css:o,data:c,setHtml:a=>e({html:a}),setCss:a=>e({css:a}),setData:a=>e({data:a}),applyAIResponse:a=>{let{html:t,css:s,data:n}=a;e({html:t||i,css:s||o,data:n?"string"==typeof n?n:JSON.stringify(n,null,2):c})}}));s()}catch(e){s(e)}})}};